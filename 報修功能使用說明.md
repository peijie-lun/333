# 📱 報修功能使用說明

## 🏠 住戶使用指南

### 📍 如何報修？

#### 步驟 1️⃣：啟動報修
在 LINE 聊天室輸入以下任一關鍵字：
- `報修`
- `我要報修`
- `新報修`

#### 步驟 2️⃣：選擇報修類型
系統會顯示快速選單，點選問題類型：
- 💧 **水電問題** - 水龍頭、管線、電路等
- 🛗 **電梯問題** - 電梯故障、按鈕異常等
- 🏊 **公共設施** - 游泳池、健身房、停車場等
- 🔨 **其他** - 其他需要報修的問題

#### 步驟 3️⃣：填寫地點
輸入詳細地點，例如：
- `3樓電梯旁`
- `B1停車場`
- `1樓大廳`
- `5樓501室門口`

#### 步驟 4️⃣：描述問題
說明遇到的問題，例如：
- `水龍頭一直滴水`
- `電梯門無法關閉`
- `健身房空調不冷`
- `停車場燈壞了`

#### 步驟 5️⃣：上傳照片（可選）
- 📸 直接上傳現場照片
- 或輸入 `略過` 跳過此步驟

#### 完成！✅
系統會回覆：
```
✅ 報修已送出
📌 編號：R20260224-001
目前狀態：🟡 待處理

🔧 類型：水電
📍 地點：3樓電梯旁
📝 問題：水龍頭漏水

管理單位會盡快處理，謝謝您的通報！
```

---

### 🔍 如何查詢報修記錄？

輸入以下任一關鍵字：
- `我的報修`
- `報修記錄`
- `報修查詢`

系統會顯示您最近的 5 筆報修記錄：
```
📋 您的報修記錄（最近5筆）

1. 編號 R20260224-001
   🔵 處理中
   水電 - 3樓電梯旁
   02/24 14:30

2. 編號 R20260223-002
   ✅ 已完成
   電梯 - 1樓電梯
   02/23 09:15

💡 輸入「報修」可開始新的報修
```

---

### 🔔 報修狀態說明

| 狀態圖示 | 狀態名稱 | 說明 |
|---------|---------|------|
| 🟡 | 待處理 | 報修單已建立，等待管理單位處理 |
| 🔵 | 處理中 | 管理單位正在處理您的報修 |
| ✅ | 已完成 | 問題已解決，報修完成 |
| ❌ | 已取消 | 報修已取消（可能為重複報修等） |

---

### 📬 狀態更新通知

當管理單位更新您的報修狀態時，會自動收到 LINE 推播通知：

#### 🔵 處理中通知
```
🔔 報修狀態更新

您的報修 R20260224-001
🔵 目前狀態：處理中

我們正在處理您的報修，請稍候。
```

#### ✅ 完成通知
```
✅ 您的報修已完成

報修編號：R20260224-001
感謝您的通報

如有任何問題，歡迎再次聯繫我們。
```

---

### ❓ 常見問題

**Q1: 可以取消報修嗎？**
A: 在填寫過程中輸入「取消報修」或「取消」即可中止流程。

**Q2: 報修編號有什麼用？**
A: 報修編號是唯一識別碼，可用於查詢進度或與管理單位溝通。

**Q3: 一定要上傳照片嗎？**
A: 不一定，可以輸入「略過」跳過上傳照片步驟。

**Q4: 為什麼看不到報修記錄？**
A: 確認您是否有建立過報修單，或嘗試輸入「報修」建立新的報修。

**Q5: 多久會處理我的報修？**
A: 管理單位會依優先級處理，緊急問題會優先處理。您會收到狀態更新通知。

---

### 💡 小提示

1. **詳細描述問題**：越詳細的描述能幫助管理單位更快速地處理
2. **上傳清晰照片**：照片能讓管理單位更了解問題狀況
3. **記下報修編號**：方便後續追蹤和查詢
4. **等待通知**：狀態更新時會自動收到 LINE 通知

---

## 🔧 管理員操作指南

### 📊 查看報修單

訪問管理後台：`https://你的網址/repairs`

**功能特點：**
- 查看所有報修單列表
- 依狀態篩選（全部/待處理/處理中/已完成）
- 查看報修詳細資訊
- 報修編號、類型、地點、問題描述
- 報修人資訊、建立時間

### ✏️ 更新報修狀態

**方法一：管理後台**
1. 找到要更新的報修單
2. 在「操作」欄位選擇新狀態
3. 系統自動更新並推播通知

**方法二：使用 API**
```bash
curl -X PATCH https://你的網址/api/repairs \
  -H "Content-Type: application/json" \
  -d '{
    "id": 1,
    "status": "processing"
  }'
```

### 🎯 設定優先級

在管理後台的「優先級」欄位可以設定：
- **低** - 非緊急問題
- **一般** - 正常處理
- **高** - 需要優先處理
- **緊急** - 立即處理

### 📝 新增備註

更新報修單時可以加入備註：
```json
{
  "id": 1,
  "status": "processing",
  "notes": "已派員前往處理"
}
```

### ⚠️ 注意事項

1. 更新狀態會自動推播 LINE 通知給住戶
2. 設定為「已完成」會自動記錄完成時間
3. 所有狀態變更都會記錄在歷史記錄中
4. 刪除報修單請謹慎使用

---

## 📞 聯絡資訊

如有任何問題或建議，請聯絡：
- 📧 Email: [管理單位信箱]
- 📱 電話: [管理單位電話]
- 🏢 地址: [管理單位地址]

---

感謝您使用報修系統！🎉
