# 📍 報修功能 - 簡化版流程

## 🎯 最新流程

### 使用者報修流程

#### 步驟 1️⃣：啟動報修
使用者輸入：`我要報修`

Bot 回覆：
```
📍 請輸入地點
```

#### 步驟 2️⃣：輸入地點
使用者輸入地點（例如：`3樓走廊`、`地下室停車場`、`501室門口`）

Bot 回覆：
```
📝 請簡單描述問題狀況
```

#### 步驟 3️⃣：描述問題
使用者輸入問題（例如：`天花板漏水`、`電梯門無法關閉`）

Bot 回覆：
```
📷 請上傳問題照片
（可直接拍照）
```

#### 步驟 4️⃣：上傳照片
**情況 A：使用者上傳照片**
Bot 回覆：
```
✅ 報修已送出
📌 編號：R20260225-001
目前狀態：🟡 待處理

📍 地點：3樓走廊
📝 問題：天花板漏水
📸 已附上照片

管理單位會盡快處理，謝謝您的通報！
```

**情況 B：使用者輸入「略過」**
Bot 回覆：
```
✅ 報修已送出
📌 編號：R20260225-001
目前狀態：🟡 待處理

📍 地點：3樓走廊
📝 問題：天花板漏水

管理單位會盡快處理，謝謝您的通報！
```

---

## 📊 資料儲存

當報修完成時，會自動儲存以下資料到 `repair_requests` 表：

| 欄位 | 說明 | 範例值 |
|------|------|--------|
| repair_number | 報修編號（自動生成） | R20260225-001 |
| user_id | LINE User ID | U1234567890abcdef |
| user_name | 使用者名稱 | 王小明 |
| building | 棟別（可為空） | null 或 A棟 |
| location | 地點 | 3樓走廊 |
| description | 問題描述 | 天花板漏水 |
| photo_url | 照片 URL | LINE_MESSAGE:12345... 或 null |
| status | 狀態 | pending |
| created_at | 建立時間 | 2026-02-25 17:30:00 |

---

## ✨ 流程特點

1. **極簡流程**：只需 3 步 + 照片，無需選擇棟別或類型
2. **自動儲存**：所有資料自動儲存到資料庫
3. **自動編號**：系統自動生成唯一報修編號
4. **照片選用**：可選擇上傳照片或略過
5. **即時回饋**：每個步驟都有清晰的提示

---

## 🔄 中止流程

任何步驟都可輸入「取消報修」或「取消」來中止流程。

---

## 📱 使用範例

```
👤 使用者：我要報修

🤖 Bot：📍 請輸入地點

👤 使用者：3樓走廊

🤖 Bot：📝 請簡單描述問題狀況

👤 使用者：天花板漏水

🤖 Bot：📷 請上傳問題照片
     （可直接拍照）

👤 使用者：[上傳照片]

🤖 Bot：✅ 報修已送出
     📌 編號：R20260225-001
     目前狀態：🟡 待處理
     
     📍 地點：3樓走廊
     📝 問題：天花板漏水
     📸 已附上照片
     
     管理單位會盡快處理，謝謝您的通報！
```

---

## 🚀 部署完成

已部署到：https://333-alhsumyjr-ivychen940113-9894s-projects.vercel.app

現在可以在 LINE Bot 中測試新的報修流程了！
